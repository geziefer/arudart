[camera_detection]
auto_detect = true
num_cameras = 3
min_width = 800
min_height = 600
exclude_builtin = true
max_index = 10

# Camera position mapping (clockwise from top):
# cam0 = upper right (near 18, ~1 o'clock)
# cam1 = lower right (near 17, ~5 o'clock) - was single-camera test position
# cam2 = left (near 11, ~9 o'clock)
#
# IMPORTANT: Camera indices depend on USB port enumeration order.
# To maintain consistent cam0/cam1/cam2 mapping, always plug cameras into the SAME USB ports:
# - USB port A → cam0 (upper right/18)
# - USB port B → cam1 (lower right/17)
# - USB port C → cam2 (left/11)

[camera_settings]
width = 800
height = 600
fps = 25
fourcc = "MJPG"

# Platform-specific camera control (v4l2-ctl on Linux, uvc-util on macOS)
# Automatically detects platform and uses appropriate tool
[camera_control]
enabled = true
# Fixed settings for all cameras:
# - auto_exposure = false (manual mode)
# - brightness = -64 (darkest)
# Per-camera tunable settings:
# - exposure_time_ms: Fixed exposure time in milliseconds (e.g. 3.7ms = 3700µs)
# - contrast: Image contrast (typically 10-50)
# - gamma: Gamma correction (typically 100-400)
[camera_control.per_camera]
cam0 = { exposure_time_ms = 3.7, contrast = 30, gamma = 250 }
cam1 = { exposure_time_ms = 3.2, contrast = 30, gamma = 200 }
cam2 = { exposure_time_ms = 3.5, contrast = 30, gamma = 380 }

[motion_detection]
downscale_factor = 4
motion_threshold = 15
blur_kernel = 21
settled_threshold = 1.0  # Lower - dart causes ~1.5-2% change
motion_check_interval = 0.05  # Faster checks (20 FPS) to catch brief motion
settled_time = 0.5  # Wait 0.5s after motion stops before detecting dart

[dart_detection]
diff_threshold = 15  # Increased from 5 - was too sensitive, picked up board noise
blur_kernel = 3  # Smaller blur to preserve dart details
min_dart_area = 50  # Lower minimum (dart might be small)
max_dart_area = 10000  # Increased - dart with flight can be large
min_shaft_length = 15  # Lower minimum length
aspect_ratio_min = 1.2  # Much lower - dart from angle might not be very elongated
